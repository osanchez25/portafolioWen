<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spa Canino Elly ‚Äî Portafolio</title>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&family=Inter:wght@300;400;500;600&display=swap"
    rel="stylesheet">

  <style>
    :root{
      --bg:#0b1020; --card:rgba(15,26,43,.65);
      --text:#e9eef7; --muted:#A8B3C7;
      --brand:#E01E8D; --brand2:#0062A8;
      --radius:20px; --shadow:0 18px 50px rgba(0,0,0,.35),0 4px 14px rgba(0,0,0,.25);
      --ring:0 0 0 3px rgba(224,30,141,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:
        radial-gradient(1100px 520px at 90% -10%,rgba(0,98,168,.22),transparent),
        radial-gradient(900px 480px at -10% 0%,rgba(224,30,141,.16),transparent),
        linear-gradient(180deg,#090f1c,#0e1430 20%,#0a1225 60%,#0a0f1e 100%);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:28px}

    /* Hero */
    .hero{
      display:grid;grid-template-columns:88px 1fr auto;gap:18px;align-items:center;
      border-radius:28px;padding:28px;border:1px solid rgba(255,255,255,.08);
      background:linear-gradient(135deg,rgba(3,44,68,.85),rgba(107,15,71,.85));
      box-shadow:var(--shadow)
    }
    .owner-pic{width:88px;height:88px;border-radius:20%;object-fit:cover;border:3px solid rgba(255,255,255,.25)}
    h1{margin:0;font:800 28px/1.1 Poppins,Inter,sans-serif;letter-spacing:.2px}
    .sub{color:var(--muted);margin-top:6px}
    .tag{align-self:center;display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border-radius:999px;font-weight:700;background:linear-gradient(90deg,var(--brand),var(--brand2))}

    /* Section & grid */
    .section-title{font:800 1.3rem/1.2 Poppins;margin:36px 2px 14px}
    .grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}

    /* Card */
    .card{
      position:relative;border-radius:20px;overflow:hidden;
      background:linear-gradient(180deg,rgba(15,26,43,.78),rgba(15,26,43,.55));
      border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(8px);
      box-shadow:var(--shadow);cursor:pointer;transition:transform .22s ease,box-shadow .22s ease,border-color .22s ease
    }
    .card:hover{transform:translateY(-4px);box-shadow:0 22px 60px rgba(0,0,0,.45),0 6px 22px rgba(0,0,0,.3);border-color:rgba(224,30,141,.45)}
    .card-header{display:flex;flex-direction:column;gap:6px;padding:14px 14px 12px;background:linear-gradient(90deg,rgba(0,98,168,.20),rgba(224,30,141,.18));border-bottom:1px solid rgba(255,255,255,.06)}
    .card-title{margin:0;font:700 1.06rem/1.1 Poppins}
    .card-proc{font-size:.9rem;color:#cfe0ff}
    /* ===== Tarjetas (galer√≠a principal) - Peek Antes/Despu√©s ===== */
.thumb{
  position:relative;
  aspect-ratio:4/3;
  overflow:hidden;
  background:#0a1225;
  border-bottom:1px solid rgba(255,255,255,.06);
}
.thumb img{
  position:absolute;
  inset:-4% -2% -4% -2%;
  width:104%; height:108%;
  object-fit:cover;
  object-position:center 42%;
  transform:translateZ(0);
  transition:opacity .28s ease;
}
.thumb .after{ opacity:1; z-index:2; }
.thumb .before{ opacity:0; z-index:1; }

/* Al hacer hover/focus visible: animaci√≥n de vistazo "antes" y regreso a "despu√©s" */
@media (hover:hover){
  .card:hover .thumb .before,
  .card:focus-within .thumb .before{
    animation: peekBefore 1200ms ease-in-out forwards;
  }
}
@keyframes peekBefore{
  0%{ opacity:0 }
  30%{ opacity:1 }    /* muestra el ANTES */
  100%{ opacity:0 }   /* vuelve al DESPU√âS */
}

/* Pill de estado en esquina */
.thumb .pill{
  position:absolute; right:10px; top:10px;
  padding:6px 10px; border-radius:999px;
  font-weight:700; font-size:.75rem;
  color:#fff;
  background:linear-gradient(90deg,var(--brand),var(--brand2));
  border:1px solid rgba(255,255,255,.18);
  opacity:.95;
}

/* ===== Detalle (modal) sigue usando compare/slider ===== */
.compare{
  position:relative; aspect-ratio:4/3; overflow:hidden; background:#0a1225;
}
.compare img{
  position:absolute; inset:-4% -2% -4% -2%;
  width:104%; height:108%;
  object-fit:cover; object-position:center 42%;
}
.compare .after{ clip-path:inset(0 0 0 50%) }
.slider{ appearance:none; position:absolute; inset:0; width:100%; height:100%; background:transparent; cursor:ew-resize; outline:none }
.bar{ position:absolute; top:0; bottom:0; width:2px; left:50%; transform:translateX(-1px); background:linear-gradient(var(--brand),var(--brand2)) }
.knob{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:44px; height:44px; border-radius:50%; background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.9),rgba(255,255,255,.55)); border:3px solid rgba(255,255,255,.7); box-shadow:0 12px 32px rgba(0,0,0,.35) }
.open-detail{position:absolute;inset:0}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;place-items:center;padding:28px;z-index:40}
    .modal.open{display:grid}
    .modal::before{content:"";position:absolute;inset:0;background:rgba(6,10,20,.72);backdrop-filter:blur(6px)}
    .modal-card{position:relative;z-index:1;width:min(100%,1040px);max-height:92vh;background:linear-gradient(180deg,rgba(18,26,50,.92),rgba(12,18,34,.92));border:1px solid rgba(255,255,255,.08);border-radius:22px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .modal-head{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,.08);background:linear-gradient(90deg,rgba(0,98,168,.22),rgba(224,30,141,.18))}
    .modal-title{margin:0;font:800 1.05rem/1 Poppins}
    .modal-close{background:transparent;border:0;color:#fff;font-weight:800;font-size:1.2rem;cursor:pointer;border-radius:10px;padding:6px 10px}
    .modal-close:focus{box-shadow:var(--ring);outline:none}
    .modal-body{padding:18px 18px 22px;overflow:auto}
    .detail-grid{display:grid;gap:22px;grid-template-columns:1.1fr .9fr;align-items:start}
    .section-sub{margin:14px 0 10px;font:800 1rem/1.1 Poppins}
    .text-block{white-space:pre-line;line-height:1.65;color:#e9eef7;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
    .tool-badges{display:flex;flex-wrap:wrap;gap:8px}
    .tool{display:inline-flex;align-items:center;gap:8px;padding:7px 11px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);font-size:.93rem}
    .tool .i{font-size:1rem}
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;margin-top:10px}
    .gallery img{
  width:100%;
  height:120px;
  object-fit:cover;
  object-position:center 42%;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.08)
}
    @media (max-width:960px){.detail-grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <img src="assets/wen.JPEG" alt="Foto del propietario" class="owner-pic" />
      <div>
        <h1>Spa Canino Elly <span style="font-weight:600;color:#d6e6ff">por Wendy Cordero</span></h1>
        <div class="sub">Transformaciones Antes/Despu√©s para peludos con alma de protagonista ‚ú®</div>
      </div>
      <span class="tag">Grooming ‚Ä¢ Estilo ‚Ä¢ Mimos fotog√©nicos</span>
    </header>

    <section>
      <div class="section-title">Galer√≠a destacada</div>
      <div class="grid" id="cardsGrid"></div>
    </section>

    <footer style="margin-top:48px;padding:24px 0;text-align:center;color:#A8B3C7">
      ¬© <span id="year"></span> PawGlow
    </footer>
  </div>

  <!-- Modal -->
  <div class="modal" id="petModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div class="modal-head">
        <strong class="modal-title" id="modalTitle">Detalle</strong>
        <button class="modal-close" id="modalClose" aria-label="Cerrar">‚úï</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mapea iconos para herramientas (se mantienen desde pets.json)
    const toolIcon = (t='')=>{
      const s=t.toLowerCase();
      if(s.includes('shampoo'))return'ü´ß';
      if(s.includes('acondicion'))return'ü´ß';
      if(s.includes('keratina'))return'üß¥';
      if(s.includes('secadora')||s.includes('sopladora'))return'üí®';
      if(s.includes('u√±as'))return'üß∞';
      if(s.includes('tijera'))return'‚úÇÔ∏è';
      if(s.includes('m√°quina')||s.includes('maquina'))return'üîå';
      if(s.includes('peine'))return'ü™Æ';
      if(s.includes('cepillo'))return'üßπ';
      if(s.includes('algod√≥n'))return'üíä';
      if(s.includes('o√≠dos')||s.includes('oidos'))return'üßº';
      if(s.includes('talco hemost'))return'üß¥';
      if(s.includes('pinza hemost'))return'üîß';
      if(s.includes('b√°lsamo')||s.includes('balsamo'))return'üß¥';
      if(s.includes('perfume'))return'üå∏';
      if(s.includes('bozal'))return'ü¶¥';
      if(s.includes('papel aluminio'))return'üßª';
      if(s.includes('tinte'))return'üé®';
      if(s.includes('pa√±')||s.includes('pa√±o'))return'üßΩ';
      if(s.includes('lavanda')||s.includes('menta')||s.includes('eucalipto')||s.includes('alpiste')||s.includes('esencia'))return'üåø';
      if(s.includes('accesorio'))return'üéÄ';
      return'üß©';
    };
    const makeToolsBadges=(tools=[])=>tools.length
      ?'<div class="tool-badges">'+tools.map(t=>`<span class="tool"><span class="i">${toolIcon(t)}</span>${t}</span>`).join('')+'</div>'
      :'';

    function wireCompare(root){
      root.querySelectorAll('[data-compare]').forEach(c=>{
        const after=c.querySelector('.after'), slider=c.querySelector('.slider'),
              bar=c.querySelector('.bar'), knob=c.querySelector('.knob');
        if(!after||!slider||!bar||!knob) return;
        const setClip=p=>{after.style.clipPath=`inset(0 0 0 ${p}%)`; bar.style.left=p+'%'; knob.style.left=p+'%';};
        slider.addEventListener('input',e=>setClip(e.target.value));
        setClip(slider.value||50);
      });
    }

    // Modal
    const modal=document.getElementById('petModal');
    const modalBody=document.getElementById('modalBody');
    const modalTitle=document.getElementById('modalTitle');
    const closeBtn=document.getElementById('modalClose');
    function openModal(idx){
      const tmpl=document.getElementById('pet-detail-'+idx);
      if(!tmpl) return;
      modalBody.innerHTML=tmpl.innerHTML;
      modalTitle.textContent=tmpl.getAttribute('data-title')||'Detalle';
      modal.classList.add('open');
      wireCompare(modalBody);
      closeBtn.focus();
    }
    function closeModal(){ modal.classList.remove('open'); modalBody.innerHTML=''; }
    closeBtn.addEventListener('click',closeModal);
    modal.addEventListener('click',e=>{ if(e.target===modal) closeModal(); });
    window.addEventListener('keydown',e=>{ if(e.key==='Escape'&&modal.classList.contains('open')) closeModal(); });

    // Cargar desde pets.json (aseg√∫rate de servir por http:// localhost para evitar CORS con file://)
    fetch('pets.json')
      .then(r=>r.json())
      .then(pets=>renderPets(pets))
      .catch(err=>console.error('Error cargando pets.json',err));

    function renderPets(pets){
      const grid=document.getElementById('cardsGrid');
      grid.innerHTML='';
      pets.forEach((p,i)=>{
        const index=i+1;
        // Si el JSON trae procedure largo, rec√≥rtalo visualmente (primer oraci√≥n/6-8 palabras)
        const shortProc=(p.procedure||'').split(/[.\n\r]/)[0].split(' ').slice(0,8).join(' ') + ((p.procedure||'').split(' ').length>8?'‚Ä¶':'');

        // Card (solo nombre + proc)
        const card=document.createElement('article');
        card.className='card';
        card.innerHTML = `
  <div class="card-header">
    <h3 class="card-title">${p.name || 'Sin nombre'}</h3>
    <div class="card-proc">${shortProc || '‚Äî'}</div>
  </div>

  <!-- Vista limpia con "peek" al pasar el mouse -->
  <div class="thumb" aria-label="Vista previa de ${p.name}">
    <img class="after" src="${p.after}" alt="${p.name} despu√©s">
    <img class="before" src="${p.before}" alt="${p.name} antes">
    <span class="pill">Antes/Despu√©s</span>
  </div>

  <a href="#" class="open-detail" data-open-detail data-index="${index}" aria-label="Ver detalle de ${p.name}" tabindex="0"></a>
`;
        grid.appendChild(card);

        // Template de detalle (nombre SOLO en el header del modal)
        const tmpl=document.createElement('template');
        tmpl.id='pet-detail-'+index;
        tmpl.setAttribute('data-title', p.name||'Detalle');
        const extras=(p.extras||[]).map(ph=>`<img src="${ph}" alt="Foto extra de ${p.name}">`).join('');
        tmpl.innerHTML=`
          <div class="detail-grid">
            <div>
              <div class="compare" data-compare style="margin-bottom:14px" aria-label="Comparar antes y despu√©s de ${p.name}">
                <img class="before" src="${p.before}" alt="${p.name} antes">
                <img class="after"  src="${p.after}"  alt="${p.name} despu√©s">
                <input class="slider" type="range" min="0" max="100" value="50" aria-label="Arrastra para ver el despu√©s">
                <div class="bar" aria-hidden="true"></div>
                <div class="knob" aria-hidden="true"></div>
              </div>
              ${extras ? '<div class="section-sub">M√°s fotos</div><div class="gallery">'+extras+'</div>' : ''}
            </div>
            <div>
              <div class="section-sub">Procedimiento</div>
              <div class="text-block">${p.procedure||'‚Äî'}</div>

              <div class="section-sub">Descripci√≥n</div>
              <div class="text-block">${p.description||'‚Äî'}</div>

              <div class="section-sub">Herramientas</div>
              ${makeToolsBadges(p.tools)}
            </div>
          </div>
        `;
        document.body.appendChild(tmpl);
      });

      // abrir detalle (delegado)
      document.addEventListener('click',e=>{
        const link=e.target.closest('[data-open-detail]');
        if(link){ e.preventDefault(); openModal(link.getAttribute('data-index')); }
      });

      wireCompare(document);
    }
  </script>
</body>
</html>
